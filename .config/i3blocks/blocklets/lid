#!/bin/bash
lid_state=$(perl -ane 'print $F[1]' /proc/acpi/button/lid/LID/state)
if [ "$lid_state" = "closed" ]; then
    if xrandr --current | grep " connected" | grep -v eDP1 -q; then
        # FIXME: need to turn back on when opened....
        #xrandr --output eDP1 --off
        echo
    else
        laptop-lock >/dev/null &
        on_ac_power || laptop-smartsleep >/dev/null
    fi
fi

exit 0
