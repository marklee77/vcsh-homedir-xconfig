#!/bin/bash
scriptname=$(basename $0)
run_dir=${HOME}/.local/var/run/blocklets-$scriptname
mkdir -p $run_dir


lid_state=$(perl -ane 'print $F[1]' /proc/acpi/button/lid/LID/state)
if [ "$lid_state" = "closed" ]; then
    if ! xrandr --current | grep " connected" | grep -v ^eDP1 -q; then
        laptop-lock >/dev/null &
        on_ac_power || laptop-smartsleep >/dev/null
    fi
fi

exit 0
