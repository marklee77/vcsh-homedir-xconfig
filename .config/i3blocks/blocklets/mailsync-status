#!/bin/bash
rundir="${XDG_RUNTIME_DIR:-${HOME}/.local/var/run}/mailsync"
if ls ${rundir}/*.error >/dev/null 2>/dev/null; then
    echo -e " \uf132: mail sync error"
    exit 33
fi

lockdir="${XDG_RUNTIME_DIR:-${HOME}/.local/var}/mailsync.lock"
pidfile="${lockdir}/PID"
otherpid=$(cat ${pidfile} 2>/dev/null)
othercmd=$(ps --no-headers --format command --pid ${otherpid} 2>/dev/null)
if [[ "${othercmd}" =~ .*mailsync.* ]]; then
    echo -e "\uf021\uf132"
    exit 0
fi
  
queuedir="${HOME}/.local/var/spool/msmtpqueue"
if find ${queuedir}/* -type f >/dev/null 2>/dev/null; then
